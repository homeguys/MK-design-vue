import{_ as a,D as t,c as n,I as e,k as s,a as l,R as h,o as p}from"./chunks/framework.840RyDbT.js";const _=JSON.parse('{"title":"Taro里面滚动穿透的问题","description":"","frontmatter":{"editLink":true},"headers":[],"relativePath":"zh-CN/tech/mobile/Taro里面滚动穿透的问题.md","filePath":"zh-CN/tech/mobile/Taro里面滚动穿透的问题.md","lastUpdated":1745984976000}'),k={name:"zh-CN/tech/mobile/Taro里面滚动穿透的问题.md"},r=s("h1",{id:"taro里面滚动穿透的问题",tabindex:"-1"},[l("Taro里面滚动穿透的问题 "),s("a",{class:"header-anchor vp-link",href:"#taro里面滚动穿透的问题","aria-label":'Permalink to "Taro里面滚动穿透的问题"'},"​")],-1),o=h(`<h2 id="问题起因" tabindex="-1">问题起因 <a class="header-anchor vp-link" href="#问题起因" aria-label="Permalink to &quot;问题起因&quot;">​</a></h2><p>最近的项目在用Taro重构代码， 接到个令人头秃的交互，通过拖拽栏目来改变排序顺序。 好在小程序和Taro框架， 已经封装了<strong>MovableArea</strong>和<strong>MovableView</strong>这俩标签，能降低点难度。 不过还是需要通过计算来定位位置，让我这个学酥瑟瑟发抖。</p><p>结果实现到最后的时候，遇到了个大坑， 就是滚动穿透的问题。 效果就是，当这边拖拽着栏目的时候，结果页面也跟着一起滚动。 也是醉了。</p><h2 id="解决过程" tabindex="-1">解决过程 <a class="header-anchor vp-link" href="#解决过程" aria-label="Permalink to &quot;解决过程&quot;">​</a></h2><p>首先，想到的就是事件拦截， 比如阻止事件冒泡，结果拦截也木有用， 或者用原生小程序catchtouchmove来绑定事件， 结果直接语法报错，一脸懵逼。</p><p>其次，就百度谷歌， 网上也有一些解决方法， 不过在我这里唯一生效的方法，就是靠样式生生阻止了滚动， 虽然感觉这个方法有些奇葩， 但是目前也就先采用这个方案了。</p><p>最后，就是禁用iOS系统特有的屏幕滚动特效。 不禁用采取默认值的话， iOS机型的屏幕依旧滚动的很魔性。</p><h2 id="代码示例" tabindex="-1">代码示例 <a class="header-anchor vp-link" href="#代码示例" aria-label="Permalink to &quot;代码示例&quot;">​</a></h2><p>在最外层的View增加样式， 通过是否处于点击状态变量标识，来改变样式。</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">View</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">isTouch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;scroll-lock&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;scroll-unlock&#39;}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}&gt;...&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">View</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-less vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">less</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.scroll-lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">vh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  overflow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hidden</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.scroll-unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">vh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  overflow-y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">scroll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>禁用iOS系统特有的屏幕滚动特效。 页面级新建文件 ./index.config.ts</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  disableScroll: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h2 id="后记" tabindex="-1">后记 <a class="header-anchor vp-link" href="#后记" aria-label="Permalink to &quot;后记&quot;">​</a></h2><p>话说Taro论坛也没有相关的介绍， 感觉这个问题应该是比较常见啊。 不知道是不是我找错位置了。</p><p>而且，另外有种感觉就是React系框架写东西很吃力， 也是自己不太熟悉的原因吧。</p><p>如果让我比喻的话（狗头保命勿喷）， Vue系的框架，像是一盘快餐，像是自动挡的车， 可以快速的满足需求，很多都是傻瓜式操作， 框架默认帮助自己做了很多东西， 这样缺点就是会导致代码可优化空间也会很有限， 当项目做大会觉得后继无力。</p><p>React系的框架，像是一顿正餐，像是手动挡的车， 煎炸烹煮都可以开发者自由的选择， 自由度高，可操作性比较复杂， 正因为如此， 导致项目差异会很大，想充分驾驭React就需要更多的知识储备， 高手和菜鸟写出来的东西完全是两种效果。</p><p>前端就是一个这样的生态环境吧， 框架迭代频繁， 逆水行舟，不进则退。 每天只有不断地学习，才能不会被后浪拍在沙滩上吧。</p>`,19);function d(c,E,g,y,F,C){const i=t("VPAuthor");return p(),n("div",null,[r,e(i,{members:[{avatar:"https://img-nj.piesat.cn/static/Frontend/avatar/gj.png",name:"耿健"},{avatar:"https://img-nj.piesat.cn/static/Frontend/avatar/wl.png",name:"王磊"}]},null,8,["members"]),o])}const m=a(k,[["render",d]]);export{_ as __pageData,m as default};
