import{_ as a,D as l,c as n,I as t,k as s,a as e,R as h,o as p}from"./chunks/framework.840RyDbT.js";const v=JSON.parse('{"title":"17.关于虚拟节点VNode","description":"","frontmatter":{"title":"17.关于虚拟节点VNode","date":"2020-11-25T22:36:08.000Z","tags":["Vue","React"]},"headers":[],"relativePath":"zh-CN/tech/vue&react/关于虚拟节点VNode.md","filePath":"zh-CN/tech/vue&react/关于虚拟节点VNode.md","lastUpdated":1745984976000}'),k={name:"zh-CN/tech/vue&react/关于虚拟节点VNode.md"},E=s("h1",{id:"关于虚拟节点vnode",tabindex:"-1"},[e("关于虚拟节点VNode "),s("a",{class:"header-anchor vp-link",href:"#关于虚拟节点vnode","aria-label":'Permalink to "关于虚拟节点VNode"'},"​")],-1),d=h(`<h2 id="何为-vnode" tabindex="-1">何为 VNode <a class="header-anchor vp-link" href="#何为-vnode" aria-label="Permalink to &quot;何为 VNode&quot;">​</a></h2><p>在开发过程中，或许总会听到有人提到过虚拟节点， 那么这个究竟是个什么东西？ 首先我们要有一个认知， 那就是 js 的操作的执行速度是远远高于 DOM 的操作的。 基于这个认知，为了提升页面的性能， 我们宁可多执行一些 js 操作，也要减少对 DOM 的操作（重绘、回流）次数。 所以需要用 js 以对象的形式来模拟 DOM 节点， 那么经过 js 的计算，只照着最后的结果去操作 DOM 渲染到页面即可。 而这个数据结构就是虚拟节点 VNode。</p><h2 id="vnode-的数据结构" tabindex="-1">VNode 的数据结构 <a class="header-anchor vp-link" href="#vnode-的数据结构" aria-label="Permalink to &quot;VNode 的数据结构&quot;">​</a></h2><p>正常的 html 标签一共可以分为三部分：</p><ol><li>标签名</li><li>标签属性</li><li>子元素标签</li></ol><p>那么 VNode 同样可以用一个对象的结构模拟这样的结构：</p><ol><li>tag</li><li>props</li><li>children</li></ol><p>具体可以用这个例子来展示将这个 html 转换成 VNode：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;AAA&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;BBB&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ul&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    className</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;li&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    props: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      className: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;list-item&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    children: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;AAA&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;li&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    props: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      className: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;list-item&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    children: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BBB&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="vnode-的作用" tabindex="-1">VNode 的作用 <a class="header-anchor vp-link" href="#vnode-的作用" aria-label="Permalink to &quot;VNode 的作用&quot;">​</a></h2><p>那么我们将 html 转换成一个对象之后对我们的性能优化能起到什么帮助呢？</p><ol><li>数据驱动视图</li></ol><p>不用自己手动操作 DOM。 只要写好 VM 的代码逻辑， 即可通过响应式，来实现数据-视图的绑定。 让我们将关注点更多的放在数据上， 从而能够实现更复杂的开发业务。</p><ol start="2"><li>精准更新节点</li></ol><p>可以通过 diff 算法， 将有改变的节点进行处理（销毁、新建、更新）， 而不变的节点则可以不去处理。 比起手动粗暴的操作 DOM ，性能方面会更有优势。</p><ol start="3"><li>可以整理合并我们的操作</li></ol><p>比如我们多次增加节点， 如果每次增加一个节点都渲染一次页面做很多无用功， 实际上我们想要的就是在多次增加节点后， 把最后的一个结果在页面上渲染出来即可。</p><h2 id="后记" tabindex="-1">后记 <a class="header-anchor vp-link" href="#后记" aria-label="Permalink to &quot;后记&quot;">​</a></h2><p>VNode 拥有这么多优势， 但是还是有几个问题需要我们去想通的。</p><ol><li>如何将 html 转换为 VNode，然后再将 VNode 转换为 html？</li><li>当我们 useData 之后，Vue 是如何知道数值改变了呢？</li><li>当页面需要重新渲染的时候，新旧节点是如何去对比的？（13 中有提到部分）</li></ol>`,21);function r(o,c,g,y,F,u){const i=l("VPAuthor");return p(),n("div",null,[E,t(i,{members:[{avatar:"https://img-nj.piesat.cn/static/Frontend/avatar/gj.png",name:"耿健"},{avatar:"https://img-nj.piesat.cn/static/Frontend/avatar/wl.png",name:"王磊"}]},null,8,["members"]),d])}const _=a(k,[["render",r]]);export{v as __pageData,_ as default};
